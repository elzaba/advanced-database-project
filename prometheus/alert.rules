groups:
  - name: kafka-alerts
    rules:

    # Alert Rule for Kafka Broker Bytes In per Second
    - alert: Kafka_Broker_BytesIn_PerSec_Warning
      annotations:
        description: Ingestion rate of bytes per second is high and should be monitored.
        summary: Kafka Broker Bytes In Per Sec is high.
      expr: rate(kafka_server_brokertopicmetrics_bytesinpersec{topic="sample"}[5m]) > 40
      for: 5m
      labels:
        severity: warning
        source: "prometheus"

    - alert: Kafka_Broker_BytesIn_PerSec_Critical
      annotations:
        description: Ingestion rate of bytes per second has exceeded a critical threshold.
        summary: Kafka Broker Bytes In Per Sec is critically high.
      expr: rate(kafka_server_brokertopicmetrics_bytesinpersec{topic="sample"}[5m]) > 100
      for: 5m
      labels:
        severity: critical
        source: "prometheus"